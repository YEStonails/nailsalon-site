<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Yes to Nails - Service Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js" type="text/javascript"></script>
<style>
/* original styles remain unchanged */
</style>
</head>
<body>
<header>
<div id="logoContainer">
<!-- Logo will be inserted here -->
</div>
<h1>Yes to Nails - Service Calculator</h1>
</header>
<nav>
<a onclick="showUserPanel()">Services</a> | 
<a onclick="showAdminLogin()">Admin</a>
</nav>

<!-- ✅ Admin and Sheet Setup Block -->
<section style="max-width: 500px; margin: 2em auto;">
  <h2>🛠️ Setup Google Sheets</h2>
  <button onclick="initializeSheets()">Initialize Sheets</button>
  <p id="sheetInitResult"></p>

  <h2 style="margin-top: 2em;">🔐 Admin Login</h2>
  <input type="text" id="adminUser" placeholder="Username" style="width: 100%; padding: 0.6em; margin: 0.5em 0;" />
  <input type="password" id="adminPass" placeholder="Password" style="width: 100%; padding: 0.6em; margin: 0.5em 0;" />
  <button onclick="adminLogin()" style="width: 100%; padding: 0.6em;">Login</button>
  <p id="adminLoginResult"></p>
</section>

<main id="userPanel">
<!-- remaining content stays unchanged -->
</main>
<footer>
<p>© 2023 Yes to Nails. All rights reserved.</p>
</footer>
<script>
  const INIT_SHEET_URL = 'https://script.google.com/macros/s/AKfycbz0cFlyWEWmFxAZhuSAYsTzxBGFCANzrIXNT4608gU6R2J-TYT1QpvmfdXNU3ZqhvLPFg/exec';

  function initializeSheets() {
    const payloads = [
      {
        sheet: 'Services',
        headers: ['ID', 'Name', 'Category', 'Price', 'Duration', 'Description'],
        rows: []
      },
      {
        sheet: 'BusinessHours',
        headers: ['day', 'open', 'close', 'closed'],
        rows: [
          ['monday', '09:00', '18:00', false],
          ['tuesday', '09:00', '18:00', false],
          ['wednesday', '09:00', '18:00', false],
          ['thursday', '09:00', '18:00', false],
          ['friday', '09:00', '18:00', false],
          ['saturday', '09:00', '18:00', false],
          ['sunday', '09:00', '18:00', true]
        ]
      },
      {
        sheet: 'EmailSettings',
        headers: ['sendToCustomers', 'sendToAdmin', 'adminEmail'],
        rows: [[true, true, 'nailsk2022@gmail.com']]
      },
      {
        sheet: 'Admin',
        headers: ['username', 'password'],
        rows: [['admin', 'admin123']]
      }
    ];

    let done = 0;
    document.getElementById('sheetInitResult').textContent = 'Initializing...';

    payloads.forEach(sheetData => {
      fetch(`${INIT_SHEET_URL}?sheet=${sheetData.sheet}`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify([sheetData.headers, ...sheetData.rows])
      })
      .then(res => res.text())
      .then(() => {
        done++;
        if (done === payloads.length) {
          document.getElementById('sheetInitResult').textContent = '✅ All tabs initialized!';
        }
      })
      .catch(err => {
        document.getElementById('sheetInitResult').textContent = `❌ Error: ${err.message}`;
      });
    });
  }

  function adminLogin() {
    const username = document.getElementById('adminUser').value;
    const password = document.getElementById('adminPass').value;

    fetch(`${INIT_SHEET_URL}?sheet=Admin`)
      .then(res => res.json())
      .then(data => {
        const match = data.find(row => row.username === username && row.password === password);
        const message = match ? "✅ Login successful!" : "❌ Invalid credentials.";
        document.getElementById('adminLoginResult').textContent = message;
      })
      .catch(err => {
        document.getElementById('adminLoginResult').textContent = "❌ Login error.";
        console.error(err);
      });
  }
</script>
</body>
</html>
