
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yes to Nails - Service Calculator</title>
  <style>
    :root {
      --pink: #ffcce0;
      --baby-pink: #ffe6f0;
      --white: #ffffff;
      --dark-pink: #d63384;
      --button-pink: #ff99cc;
    }
    body {
      font-family: 'Montserrat', Arial, sans-serif;
      background-color: var(--baby-pink);
      color: #333;
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }
    header, footer {
      background-color: var(--pink);
      text-align: center;
      padding: 1.5em;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    header img {
      max-height: 80px;
      margin-bottom: 0.5em;
    }
    header h1 {
      margin: 0;
      color: var(--dark-pink);
      font-size: 1.8rem;
    }
    nav {
      text-align: center;
      padding: 0.8em;
      background-color: #fff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    nav a {
      text-decoration: none;
      color: var(--dark-pink);
      font-weight: bold;
      cursor: pointer;
      padding: 0.5em 1em;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    nav a:hover {
      background-color: var(--pink);
    }
    main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      padding: 2em;
      gap: 1.5em;
      max-width: 1200px;
      margin: 0 auto;
    }
    section {
      background: var(--white);
      padding: 1.5em;
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.08);
    }
    h2 {
      color: var(--dark-pink);
      margin-top: 0;
      border-bottom: 2px solid var(--pink);
      padding-bottom: 0.5em;
    }
    .service {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8em 0;
      border-bottom: 1px solid #eee;
    }
    .service:hover {
      background-color: #f9f9f9;
    }
    .service-info {
      flex-grow: 1;
    }
    .service-name {
      font-weight: bold;
    }
    .service-details {
      font-size: 0.9em;
      color: #666;
    }
    .service-price {
      font-weight: bold;
      margin: 0 1em;
    }
    .service-duration {
      color: #666;
      font-size: 0.9em;
      margin-right: 1em;
    }
    .add-btn {
      background-color: var(--button-pink);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.4em 0.8em;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .add-btn:hover {
      background-color: var(--dark-pink);
    }
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.8em 0;
      border-bottom: 1px solid #eee;
    }
    .remove-btn {
      background-color: #ff6b6b;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.3em 0.6em;
      cursor: pointer;
      font-size: 0.8em;
    }
    .cart-empty {
      text-align: center;
      color: #999;
      padding: 2em 0;
    }
    .total-section {
      margin-top: 1em;
      padding-top: 1em;
      border-top: 2px dashed var(--pink);
    }
    .total-row {
      display: flex;
      justify-content: space-between;
      font-weight: bold;
    }
    form input, form select, form textarea {
      width: 100%;
      padding: 0.8em;
      margin: 0.5em 0 1em;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
      font-family: inherit;
    }
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1em;
    }
    .btn {
      background-color: var(--button-pink);
      color: white;
      padding: 0.8em;
      border: none;
      width: 100%;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1em;
      transition: background-color 0.3s;
    }
    .btn:hover {
      background-color: var(--dark-pink);
    }
    #adminPanelWrapper {
      display: none;
      max-width: 600px;
      margin: 2em auto;
      padding: 2em;
      background: var(--white);
      border-radius: 12px;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    .hidden {
      display: none !important;
    }
    .logout-link {
      text-align: right;
      margin: 0.5em;
      font-size: 0.9em;
      cursor: pointer;
      color: var(--dark-pink);
    }
    .logout-link:hover {
      text-decoration: underline;
    }
    .confirmation-box {
      background-color: #d4edda;
      color: #155724;
      padding: 1em;
      border-radius: 4px;
      margin: 1em 0;
      text-align: center;
    }
    .error-box {
      background-color: #f8d7da;
      color: #721c24;
      padding: 1em;
      border-radius: 4px;
      margin: 1em 0;
      text-align: center;
    }
    .admin-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1em;
      margin: 1em 0;
    }
    .admin-card {
      background-color: #f8f9fa;
      padding: 1em;
      border-radius: 8px;
      text-align: center;
    }
    .admin-card h3 {
      margin-top: 0;
      color: var(--dark-pink);
    }
    .admin-table {
      width: 100%;
      border-collapse: collapse;
      margin: 1em 0;
    }
    .admin-table th, .admin-table td {
      padding: 0.8em;
      border: 1px solid #ddd;
      text-align: left;
    }
    .admin-table th {
      background-color: var(--pink);
    }
    .admin-form {
      margin: 1em 0;
    }
    .back-btn {
      background-color: #6c757d;
      color: white;
      padding: 0.5em 1em;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-bottom: 1em;
    }
    .category-badge {
      display: inline-block;
      background-color: var(--pink);
      color: var(--dark-pink);
      padding: 0.2em 0.6em;
      border-radius: 12px;
      font-size: 0.8em;
      margin-right: 0.5em;
    }
    .time-slot {
      display: inline-block;
      padding: 0.5em 1em;
      margin: 0.3em;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      background-color: #f8f9fa;
    }
    .time-slot.selected {
      background-color: var(--pink);
      color: var(--dark-pink);
      font-weight: bold;
    }
    .time-slot.booked {
      background-color: #e9ecef;
      color: #adb5bd;
      cursor: not-allowed;
      text-decoration: line-through;
    }
    .time-slots-container {
      margin: 1em 0;
    }
    footer {
      padding: 2em;
      text-align: center;
      color: var(--dark-pink);
      font-size: 0.9em;
    }
    @media (max-width: 768px) {
      main {
        grid-template-columns: 1fr;
        padding: 1em;
      }
      .form-row {
        grid-template-columns: 1fr;
      }
      header h1 {
        font-size: 1.5rem;
      }
    }
    /* Logo SVG */
    .logo-svg {
      width: 80px;
      height: 80px;
    }
  </style>
</head>
<body>
  <header>
    <svg class="logo-svg" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
      <circle cx="50" cy="50" r="45" fill="#fff" />
      <path d="M30,40 Q50,20 70,40 Q90,60 70,80 Q50,100 30,80 Q10,60 30,40 Z" fill="#ff99cc" />
      <text x="50" y="55" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#fff">YES TO</text>
      <text x="50" y="70" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#fff">NAILS</text>
    </svg>
    <h1>Yes to Nails - Service Calculator</h1>
  </header>
  <nav>
    <a onclick="showUserPanel()">Services</a> | 
    <a onclick="showAdminLogin()">Admin</a>
  </nav>
  <main id="userPanel">
    <section id="services">
      <h2>Browse Services</h2>
      <select id="categoryFilter" onchange="filterServices()">
        <option value="all">All Categories</option>
      </select>
      <div id="serviceList"></div>
    </section>
    <section>
      <h2>Your Selection</h2>
      <div id="cart"></div>
      <div class="total-section">
        <div class="total-row">
          <span>Total Duration:</span>
          <span id="totalDuration">0 mins</span>
        </div>
        <div class="total-row">
          <span>Total Price:</span>
          <span>AED <span id="totalPrice">0.00</span></span>
        </div>
      </div>
    </section>
    <section style="grid-column: span 2;">
      <h2>Book Your Appointment</h2>
      <form id="bookingForm" onsubmit="submitBooking(event)">
        <div class="form-row">
          <div>
            <label for="name">Full Name</label>
            <input type="text" id="name" placeholder="Your Name" required>
          </div>
          <div>
            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Your Email" required>
          </div>
        </div>
        <div class="form-row">
          <div>
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" placeholder="Your Phone Number" required>
          </div>
          <div>
            <label for="bookingDate">Preferred Date</label>
            <input type="date" id="bookingDate" required onchange="generateTimeSlots()">
          </div>
        </div>
        
        <div>
          <label>Select Time Slot</label>
          <div id="timeSlots" class="time-slots-container">
            <p>Please select a date first</p>
          </div>
          <input type="hidden" id="selectedTime" required>
        </div>
        
        <label for="notes">Special Requests</label>
        <textarea id="notes" rows="3" placeholder="Any special requests or notes"></textarea>
        <button type="submit" class="btn">Confirm Booking</button>
      </form>
      <div id="confirmation"></div>
    </section>
  </main>

  <div id="adminPanelWrapper">
    <section id="adminLoginSection">
      <h2>Admin Login</h2>
      <form id="adminLogin" onsubmit="adminAuth(event)">
        <label for="adminUser">Username</label>
        <input type="text" id="adminUser" placeholder="Admin Username" required>
        <label for="adminPass">Password</label>
        <input type="password" id="adminPass" placeholder="Admin Password" required>
        <button class="btn">Login</button>
      </form>
      <div id="adminLoginMessage"></div>
      <p style="text-align: center; margin-top: 1em;">
        <a onclick="showUserPanel()" style="color: var(--dark-pink); cursor: pointer;">Back to Services</a>
      </p>
    </section>

    <section id="adminPanel" class="hidden">
      <div class="logout-link" onclick="logoutAdmin()">Logout</div>
      <h2>Admin Panel</h2>
      
      <div class="admin-actions">
        <div class="admin-card">
          <h3>Services</h3>
          <p>Manage your salon services</p>
          <button class="btn" onclick="showServiceManager()">Manage Services</button>
        </div>
        <div class="admin-card">
          <h3>Bookings</h3>
          <p>View and manage appointments</p>
          <button class="btn" onclick="showBookingManager()">View Bookings</button>
        </div>
      </div>
      
      <div id="serviceManager" class="hidden">
        <button class="back-btn" onclick="showAdminDashboard()">Back to Dashboard</button>
        <h3>Manage Services</h3>
        
        <form id="addServiceForm" onsubmit="addService(event)">
          <h4>Add New Service</h4>
          <div class="form-row">
            <div>
              <label for="serviceName">Service Name</label>
              <input type="text" id="serviceName" required>
            </div>
            <div>
              <label for="serviceCategory">Category</label>
              <input type="text" id="serviceCategory" required>
            </div>
          </div>
          <div class="form-row">
            <div>
              <label for="servicePrice">Price (AED)</label>
              <input type="number" id="servicePrice" min="0" step="0.01" required>
            </div>
            <div>
              <label for="serviceDuration">Duration (mins)</label>
              <input type="number" id="serviceDuration" min="5" step="5" required>
            </div>
          </div>
          <label for="serviceDescription">Description</label>
          <textarea id="serviceDescription" rows="2"></textarea>
          <button type="submit" class="btn">Add Service</button>
        </form>
        
        <h4>Current Services</h4>
        <table class="admin-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>Price</th>
              <th>Duration</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminServiceList"></tbody>
        </table>
      </div>
      
      <div id="bookingManager" class="hidden">
        <button class="back-btn" onclick="showAdminDashboard()">Back to Dashboard</button>
        <h3>Booking Management</h3>
        <table class="admin-table">
          <thead>
            <tr>
              <th>Date & Time</th>
              <th>Client</th>
              <th>Services</th>
              <th>Total</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="bookingsList"></tbody>
        </table>
      </div>
    </section>
  </div>

  <footer>
    <p>Â© 2023 Yes to Nails. All rights reserved.</p>
  </footer>

  <script>
    // Sample data
    let services = [
      { id: 1, name: "Classic Manicure", category: "Manicure", price: 60, duration: 30, description: "Nail shaping, cuticle care, and polish" },
      { id: 2, name: "Gel Manicure", category: "Manicure", price: 90, duration: 45, description: "Long-lasting gel polish with nail care" },
      { id: 3, name: "Classic Pedicure", category: "Pedicure", price: 80, duration: 45, description: "Foot soak, scrub, nail care, and polish" },
      { id: 4, name: "Gel Pedicure", category: "Pedicure", price: 110, duration: 60, description: "Foot care with long-lasting gel polish" },
      { id: 5, name: "Nail Art - Simple", category: "Nail Art", price: 30, duration: 15, description: "Basic designs like dots, lines, or glitter" },
      { id: 6, name: "Nail Art - Complex", category: "Nail Art", price: 60, duration: 30, description: "Detailed designs, multiple colors, or 3D elements" },
      { id: 7, name: "Acrylic Full Set", category: "Extensions", price: 180, duration: 90, description: "Full set of acrylic nail extensions" },
      { id: 8, name: "Acrylic Fill", category: "Extensions", price: 100, duration: 60, description: "Maintenance for existing acrylic nails" },
      { id: 9, name: "Nail Repair", category: "Treatments", price: 20, duration: 15, description: "Fix for broken or damaged nails" },
      { id: 10, name: "Paraffin Treatment", category: "Treatments", price: 40, duration: 20, description: "Moisturizing wax treatment for hands or feet" }
    ];

    let cart = [];
    let bookings = [];
    let bookedTimeSlots = {}; // Format: { "YYYY-MM-DD": [{ start: "HH:MM", end: "HH:MM" }] }

    // Business hours
    const businessHours = {
      start: 9, // 9 AM
      end: 18,  // 6 PM
      interval: 15 // 15-minute intervals
    };

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
      populateServices();
      populateCategories();
      updateCart();
      
      // Set minimum date for booking to today
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('bookingDate').min = today;
    });

    // Populate services list
    function populateServices(category = 'all') {
      const serviceList = document.getElementById('serviceList');
      serviceList.innerHTML = '';
      
      const filteredServices = category === 'all' 
        ? services 
        : services.filter(service => service.category === category);
      
      if (filteredServices.length === 0) {
        serviceList.innerHTML = '<p class="cart-empty">No services found in this category.</p>';
        return;
      }
      
      filteredServices.forEach(service => {
        const serviceDiv = document.createElement('div');
        serviceDiv.className = 'service';
        serviceDiv.innerHTML = `
          <div class="service-info">
            <div class="service-name">${service.name}</div>
            <div class="service-details">
              <span class="category-badge">${service.category}</span>
              ${service.description || ''}
            </div>
          </div>
          <span class="service-duration">${service.duration} mins</span>
          <span class="service-price">AED ${service.price.toFixed(2)}</span>
          <button class="add-btn" onclick="addToCart(${service.id})">Add</button>
        `;
        serviceList.appendChild(serviceDiv);
      });
    }

    // Populate category filter
    function populateCategories() {
      const categoryFilter = document.getElementById('categoryFilter');
      const categories = [...new Set(services.map(service => service.category))];
      
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categoryFilter.appendChild(option);
      });
    }

    // Filter services by category
    function filterServices() {
      const category = document.getElementById('categoryFilter').value;
      populateServices(category);
    }

    // Add service to cart
    function addToCart(serviceId) {
      const service = services.find(s => s.id === serviceId);
      if (service) {
        cart.push({...service});
        updateCart();
        // Regenerate time slots if date is already selected
        const selectedDate = document.getElementById('bookingDate').value;
        if (selectedDate) {
          generateTimeSlots();
        }
      }
    }

    // Remove service from cart
    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCart();
      // Regenerate time slots if date is already selected
      const selectedDate = document.getElementById('bookingDate').value;
      if (selectedDate) {
        generateTimeSlots();
      }
    }

    // Update cart display
    function updateCart() {
      const cartElement = document.getElementById('cart');
      const totalDuration = document.getElementById('totalDuration');
      const totalPrice = document.getElementById('totalPrice');
      
      if (cart.length === 0) {
        cartElement.innerHTML = '<p class="cart-empty">Your selection is empty. Add services from the list.</p>';
        totalDuration.textContent = '0 mins';
        totalPrice.textContent = '0.00';
        return;
      }
      
      cartElement.innerHTML = '';
      let duration = 0;
      let price = 0;
      
      cart.forEach((item, index) => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
          <div>
            <div>${item.name}</div>
            <div class="service-details">${item.duration} mins | AED ${item.price.toFixed(2)}</div>
          </div>
          <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
        `;
        cartElement.appendChild(cartItem);
        
        duration += item.duration;
        price += item.price;
      });
      
      totalDuration.textContent = `${duration} mins`;
      totalPrice.textContent = price.toFixed(2);
    }

    // Generate available time slots based on selected date and services in cart
    function generateTimeSlots() {
      const selectedDate = document.getElementById('bookingDate').value;
      const timeSlotsContainer = document.getElementById('timeSlots');
      
      if (!selectedDate) {
        timeSlotsContainer.innerHTML = '<p>Please select a date first</p>';
        return;
      }
      
      if (cart.length === 0) {
        timeSlotsContainer.innerHTML = '<p>Please add services to your selection first</p>';
        return;
      }
      
      // Calculate total duration needed for selected services
      const totalDuration = cart.reduce((sum, service) => sum + service.duration, 0);
      
      // Generate all possible time slots for the day
      const slots = [];
      for (let hour = businessHours.start; hour < businessHours.end; hour++) {
        for (let minute = 0; minute < 60; minute += businessHours.interval) {
          const startTime = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
          
          // Calculate end time based on total duration
          const startMinutes = hour * 60 + minute;
          const endMinutes = startMinutes + totalDuration;
          
          // Skip if appointment would end after business hours
          if (endMinutes > businessHours.end * 60) continue;
          
          const endHour = Math.floor(endMinutes / 60);
          const endMinute = endMinutes % 60;
          const endTime = `${endHour.toString().padStart(2, '0')}:${endMinute.toString().padStart(2, '0')}`;
          
          slots.push({ start: startTime, end: endTime });
        }
      }
      
      // Filter out already booked slots
      const bookedSlots = bookedTimeSlots[selectedDate] || [];
      const availableSlots = slots.filter(slot => {
        // Check if this slot overlaps with any booked slot
        return !bookedSlots.some(bookedSlot => {
          // Convert times to minutes for easier comparison
          const slotStart = timeToMinutes(slot.start);
          const slotEnd = timeToMinutes(slot.end);
          const bookedStart = timeToMinutes(bookedSlot.start);
          const bookedEnd = timeToMinutes(bookedSlot.end);
          
          // Check for overlap
          return (slotStart < bookedEnd && slotEnd > bookedStart);
        });
      });
      
      // Display available time slots
      timeSlotsContainer.innerHTML = '';
      if (availableSlots.length === 0) {
        timeSlotsContainer.innerHTML = '<p>No available time slots for this date. Please select another date.</p>';
        return;
      }
      
      availableSlots.forEach(slot => {
        const slotElement = document.createElement('div');
        slotElement.className = 'time-slot';
        slotElement.textContent = `${slot.start} - ${slot.end}`;
        slotElement.dataset.start = slot.start;
        slotElement.dataset.end = slot.end;
        
        slotElement.addEventListener('click', function() {
          // Remove selected class from all slots
          document.querySelectorAll('.time-slot').forEach(el => el.classList.remove('selected'));
          // Add selected class to this slot
          this.classList.add('selected');
          // Store selected time in hidden input
          document.getElementById('selectedTime').value = JSON.stringify(slot);
        });
        
        timeSlotsContainer.appendChild(slotElement);
      });
    }

    // Helper function to convert time string to minutes
    function timeToMinutes(timeStr) {
      const [hours, minutes] = timeStr.split(':').map(Number);
      return hours * 60 + minutes;
    }

    // Submit booking
    function submitBooking(event) {
      event.preventDefault();
      
      if (cart.length === 0) {
        document.getElementById('confirmation').innerHTML = `
          <div class="error-box">Please select at least one service before booking.</div>
        `;
        return;
      }
      
      const selectedTimeValue = document.getElementById('selectedTime').value;
      if (!selectedTimeValue) {
        document.getElementById('confirmation').innerHTML = `
          <div class="error-box">Please select a time slot for your appointment.</div>
        `;
        return;
      }
      
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const phone = document.getElementById('phone').value;
      const date = document.getElementById('bookingDate').value;
      const notes = document.getElementById('notes').value;
      const selectedTime = JSON.parse(selectedTimeValue);
      
      const totalPrice = cart.reduce((sum, item) => sum + item.price, 0);
      const totalDuration = cart.reduce((sum, item) => sum + item.duration, 0);
      
      const booking = {
        id: Date.now(),
        name,
        email,
        phone,
        date,
        time: selectedTime,
        notes,
        services: [...cart],
        totalPrice,
        totalDuration,
        status: 'Pending'
      };
      
      // Add booking to the list
      bookings.push(booking);
      
      // Block the time slot
      if (!bookedTimeSlots[date]) {
        bookedTimeSlots[date] = [];
      }
      bookedTimeSlots[date].push(selectedTime);
      
      document.getElementById('confirmation').innerHTML = `
        <div class="confirmation-box">
          <h3>Booking Confirmed!</h3>
          <p>Thank you, ${name}. Your appointment has been scheduled for ${new Date(date).toLocaleDateString()} at ${selectedTime.start}.</p>
          <p>We'll send a confirmation to ${email}.</p>
        </div>
      `;
      
      // Reset form and cart
      document.getElementById('bookingForm').reset();
      document.getElementById('selectedTime').value = '';
      document.getElementById('timeSlots').innerHTML = '<p>Please select a date first</p>';
      cart = [];
      updateCart();
    }

    // Admin Authentication
    function adminAuth(event) {
      event.preventDefault();
      const username = document.getElementById('adminUser').value;
      const password = document.getElementById('adminPass').value;
      
      // Simple authentication (in a real app, this would be server-side)
      if (username === 'admin' && password === 'admin123') {
        document.getElementById('adminLoginSection').classList.add('hidden');
        document.getElementById('adminPanel').classList.remove('hidden');
        showAdminDashboard();
      } else {
        document.getElementById('adminLoginMessage').innerHTML = `
          <div class="error-box">Invalid username or password.</div>
        `;
      }
    }

    // Logout admin
    function logoutAdmin() {
      document.getElementById('adminLoginSection').classList.remove('hidden');
      document.getElementById('adminPanel').classList.add('hidden');
      document.getElementById('adminLogin').reset();
      document.getElementById('adminLoginMessage').innerHTML = '';
    }

    // Show admin login
    function showAdminLogin() {
      document.getElementById('userPanel').style.display = 'none';
      document.getElementById('adminPanelWrapper').style.display = 'block';
    }

    // Show user panel
    function showUserPanel() {
      document.getElementById('userPanel').style.display = 'grid';
      document.getElementById('adminPanelWrapper').style.display = 'none';
    }

    // Show admin dashboard
    function showAdminDashboard() {
      document.getElementById('serviceManager').classList.add('hidden');
      document.getElementById('bookingManager').classList.add('hidden');
    }

    // Show service manager
    function showServiceManager() {
      document.getElementById('serviceManager').classList.remove('hidden');
      document.getElementById('bookingManager').classList.add('hidden');
      populateAdminServiceList();
    }

    // Show booking manager
    function showBookingManager() {
      document.getElementById('serviceManager').classList.add('hidden');
      document.getElementById('bookingManager').classList.remove('hidden');
      populateBookingsList();
    }

    // Populate admin service list
    function populateAdminServiceList() {
      const adminServiceList = document.getElementById('adminServiceList');
      adminServiceList.innerHTML = '';
      
      services.forEach(service => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${service.name}</td>
          <td>${service.category}</td>
          <td>AED ${service.price.toFixed(2)}</td>
          <td>${service.duration} mins</td>
          <td>
            <button class="btn" onclick="editService(${service.id})">Edit</button>
            <button class="remove-btn" onclick="deleteService(${service.id})">Delete</button>
          </td>
        `;
        adminServiceList.appendChild(row);
      });
    }

    // Add new service
    function addService(event) {
      event.preventDefault();
      
      const newService = {
        id: services.length > 0 ? Math.max(...services.map(s => s.id)) + 1 : 1,
        name: document.getElementById('serviceName').value,
        category: document.getElementById('serviceCategory').value,
        price: parseFloat(document.getElementById('servicePrice').value),
        duration: parseInt(document.getElementById('serviceDuration').value),
        description: document.getElementById('serviceDescription').value
      };
      
      services.push(newService);
      document.getElementById('addServiceForm').reset();
      populateAdminServiceList();
      populateServices();
      populateCategories();
    }

    // Edit service (placeholder)
    function editService(serviceId) {
      alert(`Edit service functionality would be implemented here for service ID: ${serviceId}`);
    }

    // Delete service
    function deleteService(serviceId) {
      if (confirm('Are you sure you want to delete this service?')) {
        services = services.filter(service => service.id !== serviceId);
        populateAdminServiceList();
        populateServices();
        populateCategories();
      }
    }

    // Populate bookings list
    function populateBookingsList() {
      const bookingsList = document.getElementById('bookingsList');
      bookingsList.innerHTML = '';
      
      if (bookings.length === 0) {
        const row = document.createElement('tr');
        row.innerHTML = '<td colspan="6" style="text-align: center;">No bookings found.</td>';
        bookingsList.appendChild(row);
        return;
      }
      
      bookings.forEach(booking => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${new Date(booking.date).toLocaleDateString()}<br>${booking.time.start} - ${booking.time.end}</td>
          <td>${booking.name}<br><small>${booking.phone}</small></td>
          <td>${booking.services.map(s => s.name).join(', ')}</td>
          <td>AED ${booking.totalPrice.toFixed(2)}<br>${booking.totalDuration} mins</td>
          <td>${booking.status}</td>
          <td>
            <button class="btn" onclick="updateBookingStatus(${booking.id}, 'Confirmed')">Confirm</button>
            <button class="remove-btn" onclick="updateBookingStatus(${booking.id}, 'Cancelled')">Cancel</button>
          </td>
        `;
        bookingsList.appendChild(row);
      });
    }

    // Update booking status
    function updateBookingStatus(bookingId, status) {
      const booking = bookings.find(b => b.id === bookingId);
      if (booking) {
        booking.status = status;
        
        // If cancelled, free up the time slot
        if (status === 'Cancelled') {
          const date = booking.date;
          if (bookedTimeSlots[date]) {
            bookedTimeSlots[date] = bookedTimeSlots[date].filter(slot => 
              !(slot.start === booking.time.start && slot.end === booking.time.end)
            );
          }
        }
        
        populateBookingsList();
      }
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'943cb71cb186fd1f',t:'MTc0NzkyMTEyMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
